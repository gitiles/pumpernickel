<html>
<body>
<head>
<title>JavaFormatter Demo</title>
</head>
<body>
<h1>JavaFormatter Demo</h1>
<h2>What Is It</h2>
<p>This demo features a few interesting classes:</p>
<ul><li>The <code>JavaFormatter</code> applies color-coded formatting to display Java source code.</li>
<li>The formatter relies on the <code>com.pump.io.parser.java.JavaParser</code> class.</li>
<li>The <code>LineNumberBorder</code> paints the line number on the left side of the scrollpane.</li></ul>
<h2>How To Use It</h2>
<pre>JTextPane textPane = new JTextPane(javaText);
JScrollPane scrollPane = new JScrollPane(textPane);
LineNumberBorder.install(scrollPane, textPane);
new JavaFormatter(textPane);</pre>
<h2>How It Looks</h2>
<p>Below is a screenshot:</p>
<img src="data:image/jvg;base64,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" alt="This is a screenshot of the JavaFormatterDemo">
<h2>How It Works</h2>
<p>The <code>JavaFormatter</code> sets up a few <code>SimpleAttributeSets</code>: defaultAttributes, keywordAttributes, errorAttributes, commentAttributes, stringAttributes, and importantPunctuationAttributes. (They're protected, and in theory you could create a subclass to customize them. Or add getters to modify them.)</p>
<p>The <code>JavaParser</code> then parses a block of java source code, and the <code>getAttributes(..)</code> method decides which AttributeSet to pair with a given token.</p>
<p>The <code>LineNumberBorder</code> is a regular(-ish) <code>javax.swing.Border</code> that is combined with the <code>JScrollPane</code>'s existing <code>Border</code> using a <code>CompoundBorder</code>. (If we put this border on the <code>JTextComponent</code>: then the line number isn't visible when we scroll to the right.)
<h2>Discussion</h2>
<p>I've never tried to use this with a really large Java file, so I haven't focused on performance. If that use case ever comes up it might require some additional work. (Or in a worst-case scenario: it might require avoiding this class altogether if performance becomes a problem?)</p>
<p>This is similar to the <a href="resource:XMLFormatter">XMLFormatter</a>.</p>
</body>
<html>