<html>
<body>
<head>
<title>XMLFormatter Demo</title>
</head>
<body>
<h1>XMLFormatter Demo</h1>
<h2>What Is It</h2>
<p>This demo features a few interesting classes:</p>
<ul><li>The <code>XMLFormatter</code> applies color-coded formatting to display XML.</li>
<li>The formatter relies on the <code>com.pump.io.parser.xml.XMLParser</code> class.</li>
<li>The <code>LineNumberBorder</code> paints the line number on the left side of the scrollpane.</li></ul>
<h2>How To Use It</h2>
<pre>JTextPane textPane = new JTextPane(xmlText);
JScrollPane scrollPane = new JScrollPane(textPane);
LineNumberBorder.install(scrollPane, textPane);
new XMLFormatter(textPane);</pre>
<h2>How It Looks</h2>
<p>Below is a screenshot:</p>
<img src="data:image/jvg;base64,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" alt="This is a screenshot of the XMLFormatterDemo">
<h2>How It Works</h2>
<p>The <code>XMLFormatter</code> sets up a few <code>SimpleAttributeSets</code>: defaultAttributes, elementNameAttributes, errorAttributes, commentAttributes, stringAttributes, and importantPunctuationAttributes. (They're protected, and in theory you could create a subclass to customize them. Or add getters to modify them.)</p>
<p>The <code>XMLParser</code> then parses a block of XML, and the <code>getAttributes(..)</code> method decides which AttributeSet to pair with a given token.</p>
<p>The <code>LineNumberBorder</code> is a regular(-ish) <code>javax.swing.Border</code> that is combined with the <code>JScrollPane</code>'s existing <code>Border</code> using a <code>CompoundBorder</code>. (If we put this border on the <code>JTextComponent</code>: then the line number isn't visible when we scroll to the right.)
<h2>Discussion</h2>
<p>This project's <code>XMLParser</code> class is not intended to be a fully-functional XML parser. It supports what I call "everyday XML". And maybe I'll scale it up as needed, or you can swap it out with something else as needed. (I did experiment with a couple of existing parsers, but I found they didn't give me the exact positions of each token. If anyone has any leads for an XML parser that I should try, please let me know!)</p>
<p>Also I've never tried to use this with a really large XML file, so I haven't focused on performance. If that use case ever comes up it might require some additional work. (Or in a worst-case scenario: it might require avoiding this class altogether if performance becomes a problem?)</p>
<p>This is similar to the <a href="resource:JavaFormatter">JavaFormatter</a>.</p>
</body>
<html>