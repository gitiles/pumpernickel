<!DOCTYPE html>
<html>
<head>
<title>CustomizedToolbar Demo</title>
</head>
<body>

This demo replicates the "Customize Toolbar..." menu item available on Macs under the "View" menu of several applications (Safari, Mail, Preview).
<p>
<h3>Setup</h3>
<p>
The implementation gets a little bit hairy, but the setup for this demo is simple:
<p>
<pre>JComponent[] list = new JComponent[] { customize,
		new JCheckBox("Check box"), new JLabel("Label"),
		new JButton("Button"), new JSlider() };
CustomizedToolbar toolbar = new CustomizedToolbar(list, 
		new String[] { "0", "\t", "1" }, TOOLBAR_NAME);</pre>
<p>
The array of Strings indicates the default layout. A "-" represents a vertical separator, a "\t" represents a flexible gap, and a " " represents a fixed-width gap. The numbers refer to the components in the order you listed them.
<p>
<h3>Discussion</h3>
<p>
Apple has a lot to say about <a href="https://developer.apple.com/design/human-interface-guidelines/macos/windows-and-views/toolbars/">toolbars</a> in general, but so do other principled designers like <a href="https://docs.microsoft.com/en-us/windows/desktop/uxguide/cmd-toolbars">Microsoft</a>. If you're reading this you're probably looking to Swing to help make a cross-platform GUI, so my general advice is: pick and choose your favorite conventions from all available platforms as you see fit.
<p>
Honestly: I question exactly how useful this feature is vs how much of this is eye candy. On the surface you can make the argument, "This is ideal for power users who master an interface and know exactly what they want (and don't want)." But I'd counter that with: "Sure, but most power users memorize the keyboard shortcuts for everything, too." I don't have the ability to research this and quantify how often users actually use this feature. I can only hope Apple's UX team has the means/capacity to confirm that this is a feature users actually value, and that's why this feature has endured well over a decade.
<p>
It is a great idea to unify how toolbars work across a suite of applications, though. And the drag-and-drop interface is undeniably slick.
<p>
One downside appears to be that neither Apple's implementation nor my implementation is really keyboard accessible. I'm not sure if Apple has some powerful accessible mojo somewhere that lets users interact with this feature without a mouse, but if there is I didn't immediately notice it. Of course on the subject of accessibility: your toolbar should not be the <em>only</em> way users can interact with features. Most (usually all) of the options in a toolbar should be mirrored in the menubar. Menubars are a peculiar but well-established UI pattern that have several layers of accessibility support baked-in.
<p>
As usual: my implementation is not a perfect replica. For example: currently on Mac the bottom-right of this dialog includes a pulldown for "Show" ("Icon Only" / "Icon and Text" / "Text Only"). And I wrote 99% of this code over a decade ago, so I'm sure if I rewrote it from scratch today there's a lot I'd do differently.
</body>
</html>